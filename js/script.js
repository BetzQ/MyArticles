function searchUser(){let e=document.getElementById("email").value,o=document.getElementById("password").value,t=new XMLHttpRequest;t.open("GET","https://server-my-articles.vercel.app/users",!0),t.onload=function(){if(200===t.status){let n=JSON.parse(t.responseText),l=!1;n.users.forEach((t,s)=>{t.email===e&&t.password===o&&("642cc859017f964d91a250ca"===n.users[s]._id?(localStorage.setItem("isAdmin",n.users[s]._id),window.location="/admin/admin.html"):(localStorage.setItem("user_id",n.users[s]._id),window.location="/articles.html"),l=!0)}),l||(document.getElementById("alert").innerHTML="<p class='px-2 p-1 bg-red-600'>Failed to login</p>")}else console.log("Failed to get users.")},t.send()}function registerUser(){let e=document.getElementById("username").value,o=document.getElementById("email").value,t=document.getElementById("password").value;fetch("https://server-my-articles.vercel.app/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,email:o,password:t})}).then(e=>e.json()).then(e=>{let o="User created successfully"===e.message?"green":"red";document.getElementById("alert").innerHTML=`<p class='px-2 p-1 bg-${o}-700'>${e.message}</p>`}).catch(e=>{console.error(e.message)})}function toLogin(){let e=document.getElementById("changeForm"),o=document.getElementById("title-form"),t=document.getElementById("content");e.innerHTML='don\'t have me yet? <b onclick="toRegister()" class="hover:text-black/50 cursor-pointer">register</b>',o.innerHTML="Login Form",t.innerHTML=`<form onkeydown="if(event.keyCode===13) searchUser()"> <div class="mb-4"> <label class="block text-gray-700 font-bold mb-2" for="email"> Email </label> <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="email" type="email" placeholder="Email"> </div><div class="mb-6"> <label class="block text-gray-700 font-bold mb-2" for="password"> Password </label> <input class="shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" id="password" type="password" placeholder="Password"> </div><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button" onclick="searchUser()"> Login </button> </form>`}function toRegister(){let e=document.getElementById("changeForm"),o=document.getElementById("title-form"),t=document.getElementById("content");e.innerHTML='Already have an account? <b onclick="toLogin()" class="hover:text-black/50 cursor-pointer">Login</b>',o.innerHTML="Register Form",t.innerHTML=`<form onkeydown="if(event.keyCode===13) registerUser()"> <div class="mb-4"> <label class="block text-gray-700 font-bold mb-2" for="username"> Username </label> <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="username" type="text" placeholder="Username"> </div><div class="mb-4"> <label class="block text-gray-700 font-bold mb-2" for="email"> Email </label> <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="email" type="email" placeholder="Email"> </div><div class="mb-6"> <label class="block text-gray-700 font-bold mb-2" for="password"> Password </label> <input class="shadow appearance-none border border-red-500 rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" id="password" type="password" placeholder="Password"> </div><button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button" onclick="registerUser()"> Register </button> </form>`}toLogin();